
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.1, mkdocs-material-8.5.3">
    
    
      
        <title>ycit019 Lab 3 Advanced Docker - Cloud Architecture</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.7a952b86.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../css/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#1-docker-networking" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Cloud Architecture" class="md-header__button md-logo" aria-label="Cloud Architecture" data-md-component="logo">
      
  <img src="../images/k8s.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Cloud Architecture
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              ycit019 Lab 3 Advanced Docker
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Cloud Architecture" class="md-nav__button md-logo" aria-label="Cloud Architecture" data-md-component="logo">
      
  <img src="../images/k8s.svg" alt="logo">

    </a>
    Cloud Architecture
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          YCIT020
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="YCIT020" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          YCIT020
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1" type="checkbox" id="__nav_2_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_1">
          Labs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Labs" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_1">
          <span class="md-nav__icon md-icon"></span>
          Labs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../020_Module_2_Lab_Terraform_Fundamentals" class="md-nav__link">
        Module 2 Terraform Fundamentals
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2" type="checkbox" id="__nav_2_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_2">
          Assignments
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Assignments" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_2">
          <span class="md-nav__icon md-icon"></span>
          Assignments
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../020_Module_2_Assignment_Terraform_Foundation/" class="md-nav__link">
        Module 2 Terraforming GCP Foundation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../020_Module_2_Assignment_Terraform_Foundation_solution/" class="md-nav__link">
        Module 2 Terraforming GCP Foundation Solution
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../020_Module_3_Assignment_Production_GKE/" class="md-nav__link">
        Module 3 Deploying Production GKE with gcloud
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../020_Module_4_Assignment_Production_GKE_terraform/" class="md-nav__link">
        Module 4 Deploying Production GKE with terraform
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          YCIT019
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="YCIT019" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          YCIT019
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_1" type="checkbox" id="__nav_3_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_1">
          Labs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Labs" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_1">
          <span class="md-nav__icon md-icon"></span>
          Labs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ycit019_Module_5_Lab_Docker_basics/" class="md-nav__link">
        Module 5 Lab - Docker Basics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ycit019_Module_6_Lab_Advanced_Docker/" class="md-nav__link">
        Module 6 Lab - Advanced Docker
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ycit019_Module_7_Lab_Deploy_Kubernetes_kubeadm/" class="md-nav__link">
        Module 7 Lab - Deploy Kubernetes Cluster with Kubeadm
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ycit019_Module_8_Lab_Kubernetes_Concepts/" class="md-nav__link">
        Module 8 Lab - Kuberenetes Concepts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ycit019_Module_9_Kubernetes_Features/" class="md-nav__link">
        Module 9 Lab - Kubernetes Features
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ycit019_Module_10_Kubernetes_Scaling/" class="md-nav__link">
        Module 9 Part 2 Lab Kubernetes Autoscaling
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ycit019_Lab_10_Networking/" class="md-nav__link">
        Module 10 Lab - Kubernetes Networking
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ycit019_Lab_11_Storage/" class="md-nav__link">
        Module 11 Lab - Kubernetes Storage
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2" type="checkbox" id="__nav_3_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_2">
          Assignments
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Assignments" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          Assignments
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ycit019_ass1/" class="md-nav__link">
        Module 5 Assignment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ycit019_ass1_sol/" class="md-nav__link">
        Module 5 Assignment Solution
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ycit019_ass2/" class="md-nav__link">
        Module 6 Assignment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ycit019_ass2_solution/" class="md-nav__link">
        Module 6 Assignment Solution
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ycit019_ass3/" class="md-nav__link">
        Module 8 Assignment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ycit019_ass3_solution/" class="md-nav__link">
        Module 8 Assignment Solution
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ycit019_ass4_2022/" class="md-nav__link">
        Module 9 Assignment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ycit019_ass4_sol/" class="md-nav__link">
        Module 9 Assignment Solution
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ycit019_ass7/" class="md-nav__link">
        Module 10 Assignment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ycit019_ass6_solution/" class="md-nav__link">
        Module 10 Assignment Solution
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-docker-networking" class="md-nav__link">
    1 Docker Networking
  </a>
  
    <nav class="md-nav" aria-label="1 Docker Networking">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-docker-networking-basics" class="md-nav__link">
    1.1 Docker Networking Basics
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-default-bridge-network" class="md-nav__link">
    1.2 Default bridge network
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13-user-defined-private-networks" class="md-nav__link">
    1.3 User-defined Private Networks
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#14-access-containers-from-outside" class="md-nav__link">
    1.4 Access containers from outside
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-persistant-volumes" class="md-nav__link">
    2 Persistant Volumes
  </a>
  
    <nav class="md-nav" aria-label="2 Persistant Volumes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-storage-driver" class="md-nav__link">
    2.1 Storage driver
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-persisting-data-using-volumes" class="md-nav__link">
    2.2 Persisting Data Using Volumes
  </a>
  
    <nav class="md-nav" aria-label="2.2 Persisting Data Using Volumes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#221-create-and-manage-volumes" class="md-nav__link">
    2.2.1  Create and manage volumes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#222-start-a-container-with-a-volume" class="md-nav__link">
    2.2.2 Start a container with a volume
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#223-use-a-read-only-volume" class="md-nav__link">
    2.2.3 Use a read-only volume
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>ycit019 Lab 3 Advanced Docker</h1>

<p>Lab 3 Docker Networking, Persistence, Monitoring and Logging</p>
<p><strong>Objective:</strong></p>
<ul>
<li>Networks<ul>
<li>Docker basics</li>
<li>User-defined private Networks</li>
</ul>
</li>
<li>Persistence<ul>
<li>Data Volumes</li>
</ul>
</li>
</ul>
<h2 id="1-docker-networking">1 Docker Networking<a class="headerlink" href="#1-docker-networking" title="Permanent link">&para;</a></h2>
<h3 id="11-docker-networking-basics">1.1 Docker Networking Basics<a class="headerlink" href="#11-docker-networking-basics" title="Permanent link">&para;</a></h3>
<p><strong>Step 1:</strong> The Docker Network Command
The <code>docker network</code> command is the main command for configuring and managing container networks. Run the <code>docker network</code> command from the first terminal.</p>
<div class="codehilite"><pre><span></span><code>docker network
</code></pre></div>

<div class="codehilite"><pre><span></span><code>Usage:  docker network COMMAND

Manage networks

Options:
      --help   Print usage

Commands:
  connect     Connect a container to a network
  create      Create a network
  disconnect  Disconnect a container from a network
  inspect     Display detailed information on one or more networks
  ls          List networks
  prune       Remove all unused networks
  rm          Remove one or more networks

Run &#39;docker network COMMAND --help&#39; for more information on a command.
</code></pre></div>

<p>The command output shows how to use the command as well as all of the <code>docker
network</code> sub-commands. As you can see from the output, the <code>docker network</code>
command allows you to create new networks, list existing networks, inspect
networks, and remove networks. It also allows you to connect and disconnect
containers from networks.</p>
<p><strong>Step 2</strong> Run a <code>docker network ls</code> command to view existing container networks
on the current Docker host.</p>
<div class="codehilite"><pre><span></span><code>docker network ls
</code></pre></div>

<div class="codehilite"><pre><span></span><code>NETWORK ID          NAME                DRIVER              SCOPE
3430ad6f20bf        bridge              bridge              local
a7449465c379        host                host                local
06c349b9cc77        none                null                local
</code></pre></div>

<p>The output above shows the container networks that are created as part of a
standard installation of Docker.</p>
<p>New networks that you create will also show up in the output of the
<code>docker network ls</code> command.</p>
<p>You can see that each network gets a unique <code>ID</code> and <code>NAME</code>. Each network is
also associated with a single driver. Notice that the "bridge" network and the
"host" network have the same name as their respective drivers.</p>
<p><strong>Step 3:</strong> The <code>docker network inspect</code> command is used to view network
configuration details. These details include; name, ID, driver, IPAM driver,
subnet info, connected containers, and more.</p>
<p>Use <code>docker network inspect &lt;network&gt;</code> to view configuration details of the
container networks on your Docker host. The command below shows the details of
the network called <code>bridge</code>.</p>
<div class="codehilite"><pre><span></span><code>docker network inspect bridge
</code></pre></div>

<div class="codehilite"><pre><span></span><code>[
    {
        &quot;Name&quot;: &quot;bridge&quot;,
        &quot;Id&quot;: &quot;3430ad6f20bf1486df2e5f64ddc93cc4ff95d81f59b6baea8a510ad500df2e57&quot;,
        &quot;Created&quot;: &quot;2017-04-03T16:49:58.6536278Z&quot;,
        &quot;Scope&quot;: &quot;local&quot;,
        &quot;Driver&quot;: &quot;bridge&quot;,
        &quot;EnableIPv6&quot;: false,
        &quot;IPAM&quot;: {
            &quot;Driver&quot;: &quot;default&quot;,
            &quot;Options&quot;: null,
            &quot;Config&quot;: [
                {
                    &quot;Subnet&quot;: &quot;172.17.0.0/16&quot;,
                    &quot;Gateway&quot;: &quot;172.17.0.1&quot;
                }
            ]
        },
        &quot;Internal&quot;: false,
        &quot;Attachable&quot;: false,
        &quot;Containers&quot;: {},
        &quot;Options&quot;: {
            &quot;com.docker.network.bridge.default_bridge&quot;: &quot;true&quot;,
            &quot;com.docker.network.bridge.enable_icc&quot;: &quot;true&quot;,
            &quot;com.docker.network.bridge.enable_ip_masquerade&quot;: &quot;true&quot;,
            &quot;com.docker.network.bridge.host_binding_ipv4&quot;: &quot;0.0.0.0&quot;,
            &quot;com.docker.network.bridge.name&quot;: &quot;docker0&quot;,
            &quot;com.docker.network.driver.mtu&quot;: &quot;1500&quot;
        },
        &quot;Labels&quot;: {}
    }
]
</code></pre></div>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The syntax of the <code>docker network inspect</code> command is <code>docker network
inspect &lt;network&gt;</code>, where <code>&lt;network&gt;</code> can be either network name or
network ID. In the example above we are showing the configuration details
for the network called "bridge". Do not confuse this with the "bridge"
driver.</p>
</div>
<p><strong>Step 4</strong> Now, list Docker supported network driver plugins. For that run
<code>docker info</code> command, that  shows a lot of interesting information about a
Docker installation.</p>
<p>Run the <code>docker info</code> command and locate the list of network plugins.</p>
<div class="codehilite"><pre><span></span><code>docker info
</code></pre></div>

<div class="codehilite"><pre><span></span><code>Containers: 0
 Running: 0
 Paused: 0
 Stopped: 0
Images: 0
Server Version: 17.03.1-ee-3
Storage Driver: aufs
&lt;Snip&gt;
Plugins:
 Volume: local
 Network: bridge host macvlan null overlay
Swarm: inactive
Runtimes: runc
&lt;Snip&gt;
</code></pre></div>

<p>The output above shows the <strong>bridge</strong>, <strong>host</strong>,<strong>macvlan</strong>, <strong>null</strong>, and
<strong>overlay</strong> drivers.</p>
<div class="admonition summary">
<p class="admonition-title">Summary</p>
<p>We've quickly reviewed available docker networking commands as well as
found what drivers current docker setup supports.</p>
</div>
<h3 id="12-default-bridge-network">1.2 Default bridge network<a class="headerlink" href="#12-default-bridge-network" title="Permanent link">&para;</a></h3>
<p>Every clean installation of Docker comes with a pre-built network called
<strong>Default bridge network</strong>. Let's explore in more details how it works.</p>
<p><strong>Step 1</strong> Verify this with the <code>docker network ls</code>.</p>
<div class="codehilite"><pre><span></span><code>docker network ls
</code></pre></div>

<div class="codehilite"><pre><span></span><code>NETWORK ID          NAME                DRIVER              SCOPE
3430ad6f20bf        bridge              bridge              local
a7449465c379        host                host                local
06c349b9cc77        none                null                local
</code></pre></div>

<div class="admonition result">
<p class="admonition-title">Result</p>
<p>The output above shows that the <strong>bridge</strong> network is associated with the
<em>bridge</em> driver. It's important to note that the network and the driver are
connected, but they are not the same. In this example the network and the
driver have the same name - but they are not the same thing!</p>
<p>The output above also shows that the <strong>bridge</strong> network is scoped locally.
This means that the network only exists on this Docker host. This is true
of all networks using the <em>bridge</em> driver - the <em>bridge</em> driver provides
single-host networking.</p>
</div>
<p>All networks created with the <em>bridge</em> driver are based on a Linux bridge
(a.k.a. a virtual switch).</p>
<p><strong>Step 5</strong> Start webapp in Default bridge network</p>
<div class="codehilite"><pre><span></span><code>docker run -d -p 80:5000 --name webapp training/webapp python app.py
</code></pre></div>

<p><strong>Step 6</strong> Check that the webapp and db containers are running:</p>
<p><strong>Command:</strong></p>
<div class="codehilite"><pre><span></span><code>docker ps
</code></pre></div>

<h3 id="13-user-defined-private-networks">1.3 User-defined Private Networks<a class="headerlink" href="#13-user-defined-private-networks" title="Permanent link">&para;</a></h3>
<p>So far we’ve learned how Docker networking works with <strong>Docker default bridge
network</strong>. With the introduction of user-defined networking in Docker 1.9, it
is now possible to create <strong>multiple Docker bridges</strong> to allow network
segregation within the same host or <strong>multi-host networking</strong> to allow
communicate Docker containers between hosts.</p>
<p>The commands are available through the Docker Engine CLI are:</p>
<div class="codehilite"><pre><span></span><code>docker network create
docker network connect
docker network ls
docker network rm
docker network disconnect
docker network inspect
</code></pre></div>

<p>Let's demonstrate how to create a custom bridge network.</p>
<p><strong>Step 1</strong> By default, Docker runs containers in the bridge network. You may
want to isolate one or more containers in a separate network. Let’s create a
new network:</p>
<div class="codehilite"><pre><span></span><code>docker network create my-network \
-d bridge \
--subnet 172.19.0.0/16
</code></pre></div>

<p>The <code>-d</code> bridge command line argument specifies the bridge network driver and
the <code>--subnet</code> command line argument specifies the network segment in CIDR
format. If you do not specify a subnet when creating a network, then Docker
assigns a subnet automatically, so it is a good idea to specify a subnet to
avoid potential conflicts with the existing networks.</p>
<p>Below are some other options that are available with the bridge Driver:</p>
<ul>
<li>
<p>com.docker.network.bridge.enable_ip_masquerade: This instructs the Docker
  host to hide or masquerade all containers in this network behind the Docker
  host's interfaces if the container attempts to route off the local host .</p>
</li>
<li>
<p>com.docker.network.bridge.name: This is the name you wish to give to the
  bridge.</p>
</li>
<li>
<p>com.docker.network.bridge.enable_icc: This turns on or off Inter-Container
  Connectivity (ICC) mode for the bridge.</p>
</li>
<li>
<p>com.docker.network.bridge.host_binding_ipv4: This defines the host interface
  that should be used for port binding.</p>
</li>
<li>
<p>com.docker.network.driver.mtu: This sets MTU for containers attached to this
  bridge.</p>
</li>
</ul>
<p><strong>Step 2</strong> To check that the new network is created, execute docker network ls:</p>
<div class="codehilite"><pre><span></span><code>docker network ls
</code></pre></div>

<div class="codehilite"><pre><span></span><code>NETWORK ID          NAME                DRIVER              SCOPE
d428e49e4869        bridge              bridge              local
0d1f78528cc5        host                host                local
56ef0481820d        my-network          bridge              local
4a07cef84617        none                null                local
</code></pre></div>

<p><strong>Step 3</strong> Let’s inspect the new network:</p>
<div class="codehilite"><pre><span></span><code>docker network inspect my-network
</code></pre></div>

<div class="codehilite"><pre><span></span><code>[
    {
        &quot;Name&quot;: &quot;my-network&quot;,
        &quot;Id&quot;: &quot;56ef0481820d...&quot;,
        &quot;Scope&quot;: &quot;local&quot;,
        &quot;Driver&quot;: &quot;bridge&quot;,
        &quot;EnableIPv6&quot;: false,
        &quot;IPAM&quot;: {
            &quot;Driver&quot;: &quot;default&quot;,
            &quot;Options&quot;: {},
            &quot;Config&quot;: [
                {
                    &quot;Subnet&quot;: &quot;172.19.0.0/16&quot;
                }
            ]
        },
        &quot;Internal&quot;: false,
        &quot;Containers&quot;: {},
        &quot;Options&quot;: {},
        &quot;Labels&quot;: {}
    }
]
</code></pre></div>

<p><strong>Step 4</strong> As expected, there are no containers connected to the my-network.
Let’s recreate the db container in the my-network:</p>
<div class="codehilite"><pre><span></span><code>docker rm -f db
</code></pre></div>

<div class="codehilite"><pre><span></span><code>docker run -d --network=my-network --name db training/postgres
</code></pre></div>

<p><strong>Step 5</strong> Inspect the <code>my-network</code>again:</p>
<div class="codehilite"><pre><span></span><code>docker network inspect my-network
</code></pre></div>

<p><strong>Output:</strong></p>
<div class="codehilite"><pre><span></span><code>    &quot;Containers&quot;: {
        &quot;93af62cdab64...&quot;: {
            &quot;Name&quot;: &quot;db&quot;,
            &quot;EndpointID&quot;: &quot;b1e8e314cff0...&quot;,
            &quot;MacAddress&quot;: &quot;02:42:ac:12:00:02&quot;,
            &quot;IPv4Address&quot;: &quot;172.19.0.2/16&quot;,
            &quot;IPv6Address&quot;: &quot;&quot;
        }
    },
...
</code></pre></div>

<p>As you see, the <code>db</code> container is connected to the my-network and has 172.19.0.2
address.</p>
<p><strong>Step 6</strong> Let’s start an interactive session in the db container and ping the
IP address of the webapp again:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Quick reminder how to locate webapp ip:</p>
<p><code>docker inspect -f '{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}' webapp</code></p>
</div>
<div class="codehilite"><pre><span></span><code>docker exec -it db bash
</code></pre></div>

<p>Once inside of container run:</p>
<div class="codehilite"><pre><span></span><code>root@c3afff20019a:/# ping -c 1 172.17.0.3
PING 172.17.0.3 (172.17.0.3) 56(84) bytes of data.

--- 172.17.0.3 ping statistics ---
1 packets transmitted, 0 received, 100% packet loss, time 0ms
</code></pre></div>

<p>As expected, the webapp container is no longer accessible from the db container,
because they are connected to different networks.</p>
<div class="admonition summary">
<p class="admonition-title">Summary</p>
<p>Using <code>Multi-host networking</code> provides network isolation within a Docker
host via network namepsaces. This is can be used if you want to deploy
different applications on same host for isolation or resource duplicate
prevention.</p>
</div>
<p><strong>Step 7</strong> Let’s connect the webapp container to the my-network:</p>
<div class="codehilite"><pre><span></span><code>docker network connect my-network webapp
</code></pre></div>

<p><strong>Step 8</strong> Check that the webapp container now is connected to the my-network:</p>
<div class="codehilite"><pre><span></span><code>docker network inspect my-network
</code></pre></div>

<p><strong>Output:</strong></p>
<div class="codehilite"><pre><span></span><code>...
    &quot;Containers&quot;: {
        &quot;62ed4a627356...&quot;: {
            &quot;Name&quot;: &quot;webapp&quot;,
            &quot;EndpointID&quot;: &quot;ae95b0103bbc...&quot;,
            &quot;MacAddress&quot;: &quot;02:42:ac:12:00:03&quot;,
            &quot;IPv4Address&quot;: &quot;172.19.0.3/16&quot;,
            &quot;IPv6Address&quot;: &quot;&quot;
        },
        &quot;93af62cdab64...&quot;: {
            &quot;Name&quot;: &quot;db&quot;,
            &quot;EndpointID&quot;: &quot;b1e8e314cff0...&quot;,
            &quot;MacAddress&quot;: &quot;02:42:ac:12:00:02&quot;,
            &quot;IPv4Address&quot;: &quot;172.19.0.2/16&quot;,
            &quot;IPv6Address&quot;: &quot;&quot;
        }
    },
...
</code></pre></div>

<p>The output shows that two containers are connected to the my-network and the
webapp container has 172.19.0.3 address in that network.</p>
<p><strong>Step 9</strong> Check that the webapp container is accessible from the db container
using its new IP address:</p>
<div class="codehilite"><pre><span></span><code>docker exec -it db bash
</code></pre></div>

<div class="codehilite"><pre><span></span><code>root@c3afff20019a:/# ping -c 1 172.19.0.3
PING 172.19.0.3 (172.19.0.3) 56(84) bytes of data.
64 bytes from 172.19.0.3: icmp_seq=1 ttl=64 time=0.136 ms

--- 172.19.0.3 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.136/0.136/0.136/0.000 ms
</code></pre></div>

<div class="admonition success">
<p class="admonition-title">Success</p>
<p>As expected containers can communicate with each other.</p>
</div>
<p><strong>Step 10</strong> You can now remove the existing container. You should stop the
container before removing it. Alternatively you can use the -f command line
argument:</p>
<div class="codehilite"><pre><span></span><code>docker rm -f webapp
docker rm -f db
docker network rm  my-network
</code></pre></div>

<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>Use below command to delete running containers in <strong>bulk</strong>:</p>
<p><code>docker rm -f $(docker ps -q)</code></p>
</div>
<div class="admonition summary">
<p class="admonition-title">Summary</p>
<p>It is recommended to use user-defined bridge networks to control which
containers can communicate with each other, and also to enable automatic
DNS resolution of container names to IP addresses</p>
</div>
<h3 id="14-access-containers-from-outside">1.4 Access containers from outside<a class="headerlink" href="#14-access-containers-from-outside" title="Permanent link">&para;</a></h3>
<p>External Access to the Containers can be configured via publishing mechanism.</p>
<p>Docker provides 2 options to publish ports:</p>
<ul>
<li><code>-P</code> flag publishes all exposed ports</li>
<li><code>-p</code> flag allows you to specify specific ports and interfaces to use when
    mapping ports.</li>
</ul>
<p>The <code>-p</code> flag can take several different forms with the syntax looking like this:</p>
<ul>
<li>
<p>Specify the host port and container port:</p>
<p><code>–p &lt;host port&gt;:&lt;container port&gt;</code></p>
</li>
<li>
<p>Specify the host interface, host port, and container port:</p>
<p><code>–p &lt;host IP interface&gt;:&lt;host port&gt;:&lt;container port&gt;</code></p>
</li>
<li>
<p>Specify the host interface, have Docker choose a random host port, and specify
the container port:</p>
<p><code>–p &lt;host IP interface&gt;::&lt;container port&gt;</code></p>
</li>
<li>
<p>Specify only a container port and have Docker use a random host port:</p>
<p><code>–p &lt;container port&gt;</code></p>
</li>
</ul>
<p>Let's test exposing containers. For that let's start a new NGINX container and
map port 8080 on the Docker host to port 80 inside of the container. This means
that traffic that hits the Docker host on port 8080 will be passed on to port
80 inside the container.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you start a new container from the official NGINX image without specifying a
command to run, the container will run a basic web server on port 80.</p>
</div>
<p><strong>Step 1</strong> Start a new container based off the official NGINX image by running <code>docker run --name web1 -d -p 8080:80 nginx</code>.</p>
<div class="codehilite"><pre><span></span><code>docker run --name web1 -d -p 8080:80 nginx
</code></pre></div>

<div class="codehilite"><pre><span></span><code>Unable to find image &#39;nginx:latest&#39; locally
latest: Pulling from library/nginx
6d827a3ef358: Pull complete
b556b18c7952: Pull complete
03558b976e24: Pull complete
9abee7e1ef9d: Pull complete
Digest: sha256:52f84ace6ea43f2f58937e5f9fc562e99ad6876e82b99d171916c1ece587c188
Status: Downloaded newer image for nginx:latest
4e0da45b0f169f18b0e1ee9bf779500cb0f756402c0a0821d55565f162741b3e
</code></pre></div>

<p><strong>Step 2</strong> Review the container status and port mappings by running <code>docker ps</code>.</p>
<div class="codehilite"><pre><span></span><code>docker ps
</code></pre></div>

<div class="codehilite"><pre><span></span><code>CONTAINER ID   IMAGE   COMMAND                  PORTS                           NAMES
4e0da45b0f16   nginx   &quot;nginx -g &#39;daemon ...&quot;   443/tcp, 0.0.0.0:8080-&gt;80/tcp   web1
</code></pre></div>

<div class="admonition result">
<p class="admonition-title">Result</p>
<p>The top line shows the new <strong>web1</strong> container running NGINX. Take note of the
command the container is running as well as the port mapping
- <code>0.0.0.0:8080-&gt;80/tcp</code> maps port 8080 on all host interfaces to port 80
inside the <strong>web1</strong> container. This port mapping is what effectively makes the
containers web service accessible from external sources (via the Docker hosts
IP address on port 8080).</p>
</div>
<p><strong>Step 3</strong> Test connectivity to the NGINX web server, by pasting <code>&lt;Public_IP:8080&gt;</code>
of VM to the browser.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In order to locate Public IP see the list of VMs.</p>
</div>
<p>Alternatively from inside of VM run <code>curl 127.0.0.1:8080</code> command.</p>
<div class="codehilite"><pre><span></span><code>curl 127.0.0.1:8080
</code></pre></div>

<div class="codehilite"><pre><span></span><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;Snip&gt;
&lt;head&gt;
&lt;title&gt;Welcome to nginx!&lt;/title&gt;
    &lt;Snip&gt;
&lt;p&gt;&lt;em&gt;Thank you for using nginx.&lt;/em&gt;&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre></div>

<div class="admonition success">
<p class="admonition-title">Success</p>
<p>Both CLI and UI method works!</p>
</div>
<p>If you try and curl the IP address on a different port number it will fail.</p>
<div class="admonition summary">
<p class="admonition-title">Summary</p>
<p>Docker provides easy way to expose containers outside of the Docker Node.
This can ber used for connecting containers between each other:</p>
<ul>
<li>Between networks on the same host</li>
<li>Between networks on different host</li>
<li>Accessing containers from outside (e.g web site)</li>
</ul>
<p>However, port mapping is implemented via port address translation (PAT)
unlike in Kubernetes which we learn soon, exposes applications via
service IPs and communicates via POD IPs using (NAT)</p>
</div>
<p><strong>Step 4</strong> Cleanup environment</p>
<div class="codehilite"><pre><span></span><code>docker rm -f $(docker ps -q)
</code></pre></div>

<h2 id="2-persistant-volumes">2 Persistant Volumes<a class="headerlink" href="#2-persistant-volumes" title="Permanent link">&para;</a></h2>
<h3 id="21-storage-driver">2.1 Storage driver<a class="headerlink" href="#21-storage-driver" title="Permanent link">&para;</a></h3>
<p>We've discussed several Storage drivers (graphdrivers) during the class.
Let's find out what graphdriver is running in our Lab environment.</p>
<div class="codehilite"><pre><span></span><code>docker info | grep  Storage
</code></pre></div>

<div class="codehilite"><pre><span></span><code>WARNING: No swap limit support
Storage Driver: aufs
</code></pre></div>

<div class="admonition result">
<p class="admonition-title">Result</p>
<p>Our Classroom is running <code>aufs</code> storage driver. Not a suprise as we running
our Lab on Ubuntu VM.</p>
</div>
<div class="admonition summary">
<p class="admonition-title">Summary</p>
<p>Systems runnng Ubuntu or Debian ,going to run <code>aufs</code> graphdriver by
default and will most likely meet the majority of your needs.<br />
In future <code>overlay2</code> may replace <code>aufs</code> stay tunned!</p>
</div>
<h3 id="22-persisting-data-using-volumes">2.2 Persisting Data Using Volumes<a class="headerlink" href="#22-persisting-data-using-volumes" title="Permanent link">&para;</a></h3>
<p>Docker Volumes are created and assigned when containers are started. Data
Volumes allow you to map a host directory to a container for sharing data.</p>
<p>This mapping is bi-directional. It allows data stored on the host to be accessed
from within the container. It also means data saved by the process inside the
container is persisted on the host.</p>
<h4 id="221-create-and-manage-volumes">2.2.1  Create and manage volumes<a class="headerlink" href="#221-create-and-manage-volumes" title="Permanent link">&para;</a></h4>
<p><strong>Step 1</strong> Create a volume:</p>
<div class="codehilite"><pre><span></span><code>docker volume create --name my-vol
</code></pre></div>

<p><strong>Step 2</strong> List volumes:</p>
<div class="codehilite"><pre><span></span><code>docker volume ls
</code></pre></div>

<div class="codehilite"><pre><span></span><code>Output:
local               my-vol
</code></pre></div>

<p><strong>Step 3</strong> Inspect a volume:</p>
<div class="codehilite"><pre><span></span><code>docker volume inspect my-vol
</code></pre></div>

<div class="codehilite"><pre><span></span><code>[
    {
        &quot;Driver&quot;: &quot;local&quot;,
        &quot;Labels&quot;: {},
        &quot;Mountpoint&quot;: &quot;/var/lib/docker/volumes/my-vol/_data&quot;,
        &quot;Name&quot;: &quot;my-vol&quot;,
        &quot;Options&quot;: {},
        &quot;Scope&quot;: &quot;local&quot;
    }
]
</code></pre></div>

<p><strong>Step 3</strong> Add some data to the <code>Mountpoint</code> of the volume:</p>
<div class="codehilite"><pre><span></span><code>sudo touch  /var/lib/docker/volumes/my-vol/_data/test_vol
sudo ls  /var/lib/docker/volumes/my-vol/_data/
</code></pre></div>

<p><strong>Step 4</strong> Create a container <code>busybox</code> alpine image and attach created <code>my-vol</code>
volume in to it:</p>
<div class="codehilite"><pre><span></span><code>docker run -it -v my-vol:/world busybox
</code></pre></div>

<div class="codehilite"><pre><span></span><code>/ # ls /world
test_vol
/ #
</code></pre></div>

<div class="admonition result">
<p class="admonition-title">Result</p>
<p>Volume is mounted and <code>test_vol</code> file is under <code>/world</code> folder as expected</p>
</div>
<p><strong>Step 5</strong>  Try to delete the volume:</p>
<div class="codehilite"><pre><span></span><code>docker volume rm  my-vol
</code></pre></div>

<div class="codehilite"><pre><span></span><code>Error response from daemon: unable to remove volume: remove my-vol: volume is in use - [6ef3055b516b306847150af8fcea796c02cd90578967802ac29c39d3a2c90102]
</code></pre></div>

<div class="admonition failure">
<p class="admonition-title">Failure</p>
<p>Deleting container that is attached is not permited. However you can
delete with <code>-f</code> option</p>
</div>
<p><strong>Step 5</strong>  Busybox container stopped, howerver it is not deleted.
Let's locate stopped <code>busybox</code> container and delete it:</p>
<div class="codehilite"><pre><span></span><code>docker ps -a | grep busybox
</code></pre></div>

<div class="codehilite"><pre><span></span><code>docker rm $docker_id
</code></pre></div>

<p><strong>Step 6</strong> You can now delete <code>my-vol</code></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Volume is still avaiable if needed to be reattached any time</p>
</div>
<div class="codehilite"><pre><span></span><code>docker volume ls
docker volume rm my-vol
docker volume ls
</code></pre></div>

<div class="admonition summary">
<p class="admonition-title">Summary</p>
<p>Volumes can be craeted and managed separately from containers.</p>
</div>
<h4 id="222-start-a-container-with-a-volume">2.2.2 Start a container with a volume<a class="headerlink" href="#222-start-a-container-with-a-volume" title="Permanent link">&para;</a></h4>
<p>If you start a container with a volume that does not yet exist, Docker creates
the volume for you.</p>
<p><strong>Step 1</strong> Add a data volume to a container:</p>
<div class="codehilite"><pre><span></span><code>docker run -d -P --name webapp -v /webapp training/webapp python app.py
</code></pre></div>

<div class="admonition result">
<p class="admonition-title">Result</p>
<p>Command started a new container and created a new volume inside the
container at /webapp.</p>
</div>
<p><strong>Step 2</strong> Locate the volume on the host using the docker inspect command:</p>
<div class="codehilite"><pre><span></span><code> docker inspect webapp | grep -A9 Mounts
 ```
 **Output:**
 ```       &quot;Mounts&quot;: [
            {
                &quot;Type&quot;: &quot;volume&quot;,
                &quot;Name&quot;: &quot;39885c52758dcf7516513be2d44a17560e42b6da75aba30bc66d4af41df5384d&quot;,
                &quot;Source&quot;: &quot;/var/lib/docker/volumes/39885c52758dcf7516513be2d44a17560e42b6da75aba30bc66d4af41df5384d/_data&quot;,
                &quot;Destination&quot;: &quot;/webapp&quot;,
                &quot;Driver&quot;: &quot;local&quot;,
                &quot;Mode&quot;: &quot;&quot;,
                &quot;RW&quot;: true,
                &quot;Propagation&quot;: &quot;&quot;
</code></pre></div>

<p><strong>Step 3</strong> List container</p>
<div class="codehilite"><pre><span></span><code>docker volume ls
</code></pre></div>

<p><strong>Output:</strong></p>
<div class="codehilite"><pre><span></span><code>DRIVER              VOLUME NAME
local               39885c52758dcf7516513be2d44a17560e42b6da75aba30bc66d4af41df5384d
</code></pre></div>

<p><strong>Step 5</strong> Alternatively, you can specify a host directory you want to use as a data
volume:</p>
<div class="codehilite"><pre><span></span><code>mkdir db

docker run -d --name db -v ~/db:/db training/postgres
</code></pre></div>

<p><strong>Step 2</strong> Start an interactive session in the db container and create a new
file in the /db directory:</p>
<div class="codehilite"><pre><span></span><code>docker exec -it db bash
</code></pre></div>

<p>Type inside docker containers console:</p>
<div class="codehilite"><pre><span></span><code>root@9a7a4fbcc929:/# cd /db

root@9a7a4fbcc929:/db# touch hello_from_db_container

root@9a7a4fbcc929:/db# exit
</code></pre></div>

<p><strong>Step 4</strong> Check that the local db directory contains the new file:</p>
<div class="codehilite"><pre><span></span><code>ls db
hello_from_db_container
</code></pre></div>

<p><strong>Step 5</strong> Check that the data volume is persistent. Remove the db container:</p>
<div class="codehilite"><pre><span></span><code>docker rm -f db
</code></pre></div>

<p><strong>Step 6</strong> Create the db container again:</p>
<div class="codehilite"><pre><span></span><code>docker run -d --name db -v ~/db:/db training/postgres
</code></pre></div>

<p><strong>Step 7</strong> Check that its /db directory contains the hello_from_db_container
file:</p>
<div class="codehilite"><pre><span></span><code>docker exec -it db bash
</code></pre></div>

<p>Run commands inside container:</p>
<div class="codehilite"><pre><span></span><code>root@47a60c01590e:/# ls /db
hello_from_db_container
root@47a60c01590e:/# exit
</code></pre></div>

<h4 id="223-use-a-read-only-volume">2.2.3 Use a read-only volume<a class="headerlink" href="#223-use-a-read-only-volume" title="Permanent link">&para;</a></h4>
<p><strong>Step 1</strong> Mounting Volumes gives the container <strong>full read and write access</strong> to the
directory. You can specify <strong>read-only permissions</strong> on the directory by adding
the <strong>permissions :ro</strong> to the mount. If the container attempts to modify data
within the directory it will error.</p>
<div class="codehilite"><pre><span></span><code>docker run -d --name db1 -v ~/db:/db:ro training/postgres
docker exec -it db1 bash
cd db
touch test
</code></pre></div>

<div class="admonition result">
<p class="admonition-title">Result</p>
</div>
<div class="codehilite"><pre><span></span><code>touch: cannot touch &#39;test&#39;: Read-only file system
$ exit
</code></pre></div>

<p><strong> Step 2</strong> Clean up containers and volumes:</p>
<div class="codehilite"><pre><span></span><code>docker rm -f $(docker ps -q)
docker volume ls
</code></pre></div>

<div class="admonition output">
<p class="admonition-title">Output</p>
</div>
<div class="codehilite"><pre><span></span><code>DRIVER              VOLUME NAME
local               39885c52758dcf7516513be2d44a17560e42b6da75aba30bc66d4af41df5384d
</code></pre></div>

<div class="codehilite"><pre><span></span><code>docker volume rm 39885c52758dcf7516513be2d44a17560e42b6da75aba30bc66d4af41df5384d
</code></pre></div>

<div class="admonition summary">
<p class="admonition-title">Summary</p>
<p>We've learned how to manage volumes with containers</p>
</div>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>If you Docker host has several Storage plugins configured (e.g. ceph,
gluster) you can specify via <code>--opt type=btrfs, nfs</code> or <code>--driver=glusterfs</code>
during docker volume creation.</p>
</div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
      
      
    
    <a href="https://twitter.com/googlecloud" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.5bf1dace.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.37e9125f.min.js"></script>
      
    
  </body>
</html>